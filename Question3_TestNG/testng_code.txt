package testng;

import org.testng.annotations.Test;
import java.time.Duration;
import java.util.concurrent.TimeUnit;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.chrome.ChromeOptions;
import org.openqa.selenium.interactions.Actions;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.BeforeMethod;

public class Question3_TestNG {

WebDriver driver;

@BeforeMethod
public void setup()
{
	System.setProperty("webdriver.chrome.driver", "C:\\\\Intel\\\\Driver\\\\chromedriver-win64\\\\chromedriver-win64\\\\chromedriver.exe");

    ChromeOptions co = new ChromeOptions();
    co.setBinary("C:\\\\Intel\\\\Driver\\\\chrome-win64\\\\chrome-win64\\\\chrome.exe");

    driver = new ChromeDriver(co);
    driver.manage().window().maximize();
    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);

}

@Test
public void MakeMyTrip() throws InterruptedException
{

	driver.get("<https://www.makemytrip.com/>");

    Actions action = new Actions(driver);
    action.moveByOffset(50, 50).click().build().perform();
    System.out.println("Login Dialog Box closed Successfully");

    driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(15));

    WebElement flights = driver.findElement(By.xpath("//*[@id=\\"SW\\"]/div[1]/div[2]/div/div/nav/ul/li[1]/span/a/span[2]"));
    flights.click();

    WebElement roundtrip = driver.findElement(By.xpath("//ul[@class='fswTabs latoRegular darkGreyText ']/li[2]"));
    roundtrip.click();
    System.out.println("Round Trip selected");

    WebElement fromcity = driver.findElement(By.xpath("//input[@id='fromCity']"));
    Thread.sleep(2000);
    fromcity.click();
    driver.findElement(By.xpath("//input[@placeholder='From']")).sendKeys("HYD");
    Thread.sleep(5000);

    WebElement city = driver.findElement(By.xpath("//div[@id='react-autowhatever-1']//following::ul//li[1]"));
    city.click();
    System.out.println("From city Selected");

    driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(20));

    WebElement tocity = driver.findElement(By.xpath("//input[@id='toCity']"));
    tocity.sendKeys("MAA");
    Thread.sleep(2000);

    WebElement city2 =driver.findElement(By.xpath("//li[@id='react-autowhatever-1-section-0-item-0']"));
    city2.click();
    System.out.println("To city Selected");

    WebElement departureDate = driver.findElement(By.xpath("//div[@aria-label='Tue Nov 07 2023']"));
    departureDate.click();
    System.out.println("Departure date selected");

    WebElement returnDate = driver.findElement(By.xpath("//div[@aria-label='Wed Nov 15 2023']"));
    returnDate.click();
    System.out.println("Return date selected");

    WebElement search = driver.findElement(By.xpath("//a[@class='primaryBtn font24 latoBold widgetSearchBtn ']"));
    search.click();
    System.out.println("Search button clicked and navigated to the next page");

    WebElement popup = driver.findElement(By.xpath("//button[@class='button buttonSecondry buttonBig fontSize12 relative' and contains(text(),'OKAY, GOT IT!')]"));
    popup.click();
    Thread.sleep(3000);

    String title = driver.getTitle();
    System.out.println("The title of the page is : " + title);

    if (title.contains("MakeMyTrip"))
    {

    	System.out.println("Search page displayed as expected");

    }

    else
    {

        System.out.println("Search page displayed as not expected");

    }
}

@AfterMethod()
public void teardown() throws InterruptedException
{
	Thread.sleep(4000);
	driver.close();
}


}